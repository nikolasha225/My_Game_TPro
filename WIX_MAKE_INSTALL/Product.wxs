<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
	<Product Id="*"
				Name="My Game"
				Language="1049"
				Version="1.0.0.0"
				Manufacturer="KlubOfAnonimAlcoholics"
				UpgradeCode="DuctorBucktorPerm03">
		<Package InstallerVersion="500" 
				 Compressed="yes" 
				 InstallScope="perUser" />
					 <!--perMachine-->

		<MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
		<MediaTemplate EmbedCab="yes"/>

		<!-- Иконка приложения -->
		<Icon Id="GameIcon" SourceFile="./icongame.ico"/>
		<Property Id="ARPPRODUCTICON" Value="GameIcon" />

		<!-- Директория установки -->
		<Directory Id="TARGETDIR" Name="SourceDir">
			<Directory Id="ProgramFilesFolder">
				<Directory Id="INSTALLFOLDER" Name="GuardsOfElbrus_TPro" />
			</Directory>
		</Directory>

		<!-- Файлы для установки -->
		<DirectoryRef Id="INSTALLFOLDER">
			<Component Id="GameExecutable" Guid="MY_GUID_01">
				<!--TODO:==================================GUID======================================-->
				<File Id="GameEXE"
                      Source="$(var.SolutionDir)Release\MyGame.exe"
                      KeyPath="yes"
                      Checksum="yes"/>
			</Component>
			<!--TODO: ======================================openal32.dll ======================================-->
			<Component Id="GameDLLs" Guid="YOUR-GUID-2">
				<File Id="SFMLGraphics" Source="$(var.SolutionDir)Release\sfml-graphics-2.dll"/>
				<File Id="SFMLWindow" Source="$(var.SolutionDir)Release\sfml-window-2.dll"/>
				<File Id="SFMLSystem" Source="$(var.SolutionDir)Release\sfml-system-2.dll"/>
				<File Id="SFMLAudio" Source="$(var.SolutionDir)Release\sfml-audio-2.dll"/>
			</Component>

			<Component Id="GameResources" Guid="YOUR-GUID-3">
				<!--TODO: =============================== добавить остальное ======================================-->
				<File Id="ConfigFile" Source="$(var.SolutionDir)config\settings.json"/>
				<File Id="Textures" Source="$(var.SolutionDir)textures\*.*"/>
				<File Id="Sounds" Source="$(var.SolutionDir)sounds\*.*"/>
			</Component>
		</DirectoryRef>

		<!-- Компоненты фичи -->
		<Feature Id="Complete" Title="-=GuardsOfElbrus=-" Level="1">
			<ComponentRef Id="GameExecutable" />
			<ComponentRef Id="GameDLLs" />
			<ComponentRef Id="GameResources" />
		</Feature>

		<!-- Ярлыки -->
		<DirectoryRef Id="ProgramMenuFolder">
			<!--TODO: ====================================== GUID ======================================-->
			<Component Id="GameShortcut" Guid="YOUR-GUID-4">
				<Shortcut Id="GameStartMenuShortcut"
                          Name="GuardsOfElbrus_2025"
                          Description="Launch TPro Game"
                          Target="[INSTALLFOLDER]MyGame.exe"
                          WorkingDirectory="INSTALLFOLDER"/>
				<RemoveFolder Id="ProgramMenuFolder" On="uninstall"/>
				<RegistryValue Root="HKCU"
                               Key="Software\GuardsOfElbrus"
                               Name="installed"
                               Type="integer"
                               Value="1"
                               KeyPath="yes"/>
			</Component>
		</DirectoryRef>

		<!-- Ярлык на рабочем столе -->
		<Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />
		<UIRef Id="WixUI_InstallDir" />
		<WixVariable Id="WixUILicenseRtf" Value="License.rtf" />
		<WixVariable Id="WixUIBannerBmp" Value="banner.bmp" />
		<WixVariable Id="WixUIDialogBmp" Value="dialog.bmp" />

	</Product>
</Wix>